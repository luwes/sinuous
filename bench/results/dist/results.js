!function(){"use strict";const t=[];let e,n;function r(r){function o(i){if(0===arguments.length)return e&&!o.o.has(e)&&(o.o.add(e),e.u.push(o)),r;if(n)return o.t===t&&n.push(o),o.t=i,i;r=i;const s=e;return e=void 0,o.i=new Set(o.o),o.i.forEach(t=>t.s=!1),o.i.forEach(t=>{t.s||t()}),e=s,r}return o.$o=!0,o.o=new Set,o.t=t,o}function o(t,n){function r(){const o=e;e&&e.__c.push(r);const s=r.__c;return c(r),r.s=!0,e=r,n=t(n),s.forEach(t=>{-1===r.__c.indexOf(t)&&(t.s=!0)}),function t(e){return e.reduce((e,n)=>e.concat(n,t(n.__c)),[])}(r.__c).forEach(i),e=o,n}function o(){return r.s?r.u.forEach(t=>t()):n=r(),n}return t.l=r,a(r),r(),o.$o=!0,o}function i(t){t.s&&t.u.forEach(e=>{e.i&&e.i.delete(t)})}function s(t){return o(t),()=>c(t.l)}function c(t){t.__c.forEach(c),t.u.forEach(e=>{e.o.delete(t),e.i&&e.i.delete(t)}),t.v.forEach(t=>t()),a(t)}function a(t){t.u=[],t.__c=[],t.v=[]}var u=Object.freeze({__proto__:null,S:o,cleanup:function(t){return e&&e.v.push(t),t},computed:o,isListening:function(){return!!e},o:r,observable:r,root:function(t){const n=e,r=()=>{};e=r,a(r);const o=t(()=>{c(r),e=void 0});return e=n,o},sample:function(t){const n=e;e=void 0;const r=t();return e=n,r},subscribe:s,transaction:function(e){let r=n;n=[];const o=e();let i=n;return n=r,i.forEach(e=>{if(e.t!==t){const n=e.t;e.t=t,e(n)}}),o},unsubscribe:function(t){c(t.l)}});const l={},f=[];let p=0;function h(t,e,n){let r;return"string"==typeof e?e=document.createTextNode(e):e instanceof Node||(e=l.h(f,e)),11===e.nodeType&&(r=e.firstChild)&&r!==e.lastChild&&(r.t=e.lastChild.t=++p),t.insertBefore(e,n||null),void 0===r?e:r}function d(t){return this.o[t.type](t)}function y(t,e){for(let e in t)l[e]=t[e];return function(){const t=f.slice.call(arguments);let n;function r(o){if(null==o);else if("string"==typeof o)n?h(n,o):n=e?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o);else if(Array.isArray(o))n||(n=document.createDocumentFragment()),o.forEach(r);else if(o instanceof Node)n?h(n,o):n=o;else if("object"==typeof o)l.property(null,o,n,e);else if("function"==typeof o)if(n){const t=h(n,"");l.insert(n,o,t)}else n=o.apply(null,t.splice(1));else h(n,""+o)}return t.forEach(r),n}}function m(){return l.h.apply(l.h,arguments)}function _(){return l.hs.apply(l.hs,arguments)}l.insert=function(t,e,n,r,o){return t=n&&n.parentNode||t,o=o||r instanceof Node&&r,e===r||(r&&"string"!=typeof r||!("string"==typeof e||"number"==typeof e&&(e+=""))?"function"==typeof e?l.subscribe((function(){r=l.insert(t,e.call({el:t,endMark:n}),n,r,o)})):(function(t,e,n,r){if(n){if(e){if(!r){const e=(r=n.previousSibling||t.lastChild).t;if(e)for(r=r.previousSibling;r&&r.t!==e;)r=r.previousSibling}let e;for(;r&&r!==n;)e=r.nextSibling,t===r.parentNode&&(t.removeChild(r),r.t=0),r=e}}else t.textContent=""}(t,r,n,o),r=null,e&&!0!==e&&(r=h(t,e,n))):(null!=r&&t.firstChild?n?(n.previousSibling||t.lastChild).data=e:t.firstChild.data=e:n?h(t,e,n):t.textContent=e,r=e)),r},l.property=function(t,e,n,r,o){if(null!=e)if(!t||"attrs"===t&&(r=!0))for(t in e)l.property(t,e[t],n,r,o);else"o"!==t[0]||"n"!==t[1]||e.$o?"function"==typeof e?l.subscribe((function(){l.property(t,e.call({el:n,name:t}),n,r,o)})):o?n.style.setProperty(t,e):r||"data-"===t.slice(0,5)||"aria-"===t.slice(0,5)?n.setAttribute(t,e):"style"===t?"string"==typeof e?n.style.cssText=e:l.property(null,e,n,r,!0):("class"===t&&(t+="Name"),n[t]=e):function(t,e,n){e=e.slice(2).toLowerCase();const r=l.cleanup(()=>t.removeEventListener(e,d));n?t.addEventListener(e,d):r(),(t.o||(t.o={}))[e]=n}(n,t,e)},l.add=h,l.h=y(u),l.hs=y(u,!0);const g=[],v={};let b;function E(t,e){if(!t)return;if("function"==typeof t.type&&(t=t.type.apply(null,[t.__p].concat(t.__c))),!e){let n,r="";(n=t.__p.id)?r="#":(n=t.__p.class)||(n=t.__p.className)?r=".":n=t.type,r+=("function"==typeof n?n():n).split(" ").map(t=>t.replace(/([^\x80-\uFFFF\w-])/g,"\\$1")).join("."),e=document.querySelector(r)}let n;return[e,t.__p,t.__c||t].forEach((function e(r){if(r instanceof Node)n=r,n.u=n.u||0;else if(Array.isArray(r))r.forEach(e);else if(n){let e=x(n)[n.u];if(e)if(r===v)n.u++;else if("object"==typeof r)null===r.type?(n.u++,e.i=!0,e.data.trim()!==r.__p.trim()&&(r.o.__c.length!==x(n).length&&e.splitText(e.data.indexOf(r.__p)+r.__p.length),e.data.trim()!==r.__p.trim()&&(e.data=r.__p))):r.type&&(E(r,e),n.u++);else if("function"==typeof r){let t,o,i,s=e.data,c="";l.subscribe((function(){b=t;let a=r();const u="string"==typeof a||"number"==typeof a;a=u?c+a:a,t?s=l.insert(n,a,o,s,i):(u?(n.u++,r.o.__c.length!==x(n).length&&(e.splitText(e.data.indexOf(a)+a.length),c=s.match(/^\s*/)[0]),e.data.trim()!==a.trim()&&(e.data=a)):(Array.isArray(a)&&(i=e,e=n),E(a,e),s=[]),o=l.add(n,"",x(n)[n.u])),b=!1,t=!0}))}"object"==typeof r&&(r.__c||r.__p||l.property(null,r,n,t.t))}})),n}function x(t){let e=t.firstChild,n=[];for(;e;)(3!==e.nodeType||e.data.trim()||e.i)&&n.push(e),e=e.nextSibling;return n}const S=function(t){return function(){if(b)return(t?_:m).apply(null,arguments);const e=g.slice.call(arguments),n={__c:[]};function r(e,i){t&&(n.t=t),null==e||(e===v||"function"==typeof e?n.type||i>0?o(n,e):n.type=e:Array.isArray(e)?e.forEach(r):"object"==typeof e?e.type?o(n,e):n.__p=e:n.type?o(n,{type:null,__p:e}):n.type=e)}function o(t,e){t.__c.push(e),e.o=t}return e.forEach(r),n.type?n:n.__c.length>1?n.__c:n.__c[0]}}();var A=function(t){var e=0;t+="x";for(var n=parseInt(65745979961613.07),r=0;r<t.length;r++)e>n&&(e=parseInt(e/137)),e=131*e+t.charCodeAt(r);return e},k=function(t,e,n){var r=n<.5?n*(1+e):n+e-n*e,o=2*n-r;return[(t/=360)+1/3,t,t-1/3].map((function(t){return t<0&&t++,t>1&&t--,t=t<1/6?o+6*(r-o)*t:t<.5?r:t<2/3?o+6*(r-o)*(2/3-t):o,Math.round(255*t)}))};function w(t){return"[object Array]"===Object.prototype.toString.call(t)}var F=function(t){var e=[(t=t||{}).lightness,t.saturation].map((function(t){return w(t=void 0!==t?t:[.35,.5,.65])?t.concat():[t]}));this.L=e[0],this.S=e[1],"number"==typeof t.hue&&(t.hue={min:t.hue,max:t.hue}),"object"!=typeof t.hue||w(t.hue)||(t.hue=[t.hue]),void 0===t.hue&&(t.hue=[]),this.hueRanges=t.hue.map((function(t){return{min:void 0===t.min?0:t.min,max:void 0===t.max?360:t.max}})),this.hash=t.hash||A};F.prototype.hsl=function(t){var e,n,r=this.hash(t);if(this.hueRanges.length){var o=this.hueRanges[r%this.hueRanges.length];e=r/this.hueRanges.length%727*(o.max-o.min)/727+o.min}else e=r%359;return r=parseInt(r/360),n=this.S[r%this.S.length],r=parseInt(r/this.S.length),[e,n,this.L[r%this.L.length]]},F.prototype.rgb=function(t){var e=this.hsl(t);return k.apply(this,e)},F.prototype.hex=function(t){var e,n=this.rgb(t);return e="#",n.forEach((function(t){t<16&&(e+=0),e+=t.toString(16)})),e};var C=F;const j={vanillajs:"#FFDD57",sinuous:"#70EDAC",solid:"#481B82",knockout:"#DB5A03",hyperapp:"#037FFF",redom:"#E7DC64",bobril:"#936037",preact:"#673AB8",react:"#61DAFB",mikado:"#59ABE9",inferno:"#E41E1D",wasm:"#644FF0",vue:"#40B883",angular:"#A6130C",ember:"#E04E39",svelte:"#FF3E00",lit:"#FF6C6A",mithril:"#1E5799"},D=["01_run1k","02_replace1k","03_update10th1k_x16","04_select1k","05_swap1k","06_remove-one-1k","07_create10k","08_create1k-after1k_x2","09_clear1k_x8","21_ready-memory","22_run-memory","23_update5-memory","24_run5-memory","25_run-clear-memory","31_startup-ci","32_startup-bt","34_startup-totalbytes"];function N(t){return t.id||t.framework}function B(t){return N(t).split("-")[0]}function L(t){if(0===t.length)return 0;t.sort((function(t,e){return t-e}));var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2}const q=r(document.querySelector(".load-input").value),I=r([]),M=r("#10-fastest"),R=o(()=>{const t=I().map(t=>t.benchmark);return(e=t.length?t:D,[...new Set(e)]).sort();var e}),T=r(!1),O=r(!1);function $(){location.hash&&M(location.hash)}function P(t){t.preventDefault(),document.getElementById(t.target.href.split("#")[1]).scrollIntoView({behavior:"smooth"})}async function W(){T(!0);const t=await fetch(q()),e=await t.json();I(Array.isArray(e)?e:e.results),T(!1)}let z,V=[];function G(){I().length&&(cancelAnimationFrame(z),V=R().slice(),console.log("Restart plotting!"),O(!0),H())}function H(){const t=V.shift();if(!t)return console.log("Finished plotting!"),void O(!1);!function(t){let e=I().filter(t=>!N(t).includes("non-keyed")).filter(e=>e.benchmark===t).sort((t,e)=>L(t.values)>L(e.values)?1:-1);const n=M().match(/\d+/);n&&(e=e.slice(0,parseInt(n[0])));let r=[];const o=e.map(t=>(r=r.concat(t.values),{name:N(t),marker:{color:j[B(t)]||(new C).hex(B(t))},y:t.values,type:"box"})),i=t.startsWith("0")?"Duration in ms (lower is better)":t.startsWith("2")?"Memory in MB (lower is better)":t.startsWith("3")?"Startup metrics":"",s={title:t,yaxis:{title:i,range:[0,Math.max(...r)]}};Plotly.newPlot(t,o,s,{responsive:!0})}(t),z=requestAnimationFrame(H)}!function(){const t=()=>T()?" is-loading":"";E(S("div",null,S("div",{class:()=>"select is-small"+t()},S("select",{onchange:t=>q(t.target.value)}))),document.querySelector(".select-bench")),document.querySelectorAll(".filter-list a").forEach(t=>{E(S("a",{class:()=>t.href.includes(M())?"is-active":""}),t)}),s(W),document.querySelector(".benchmarks-list").append(m([()=>R().map(t=>m("li",null,m("a",{onclick:P,href:()=>"#"+("function"==typeof t?t():t)},t)))])),document.querySelector(".results").append(m([()=>R().map(t=>m("div",{class:"benchmark is-12 column"},m("div",{id:t})))])),s(G),window.addEventListener("hashchange",$),$()}()}();
